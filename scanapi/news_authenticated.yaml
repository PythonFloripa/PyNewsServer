name: news_authenticated
path: news
headers:
  Authorization: Bearer ${access_token}
  user-email: teste@teste.com
requests:
  - name: create_news
    method: POST
    body:
      title: "Test News"
      content: "This is a test news article."
      category: "test_category"
      tags: "test_tag"
      source_url: "https://example.com/test-news"
      social_media_url: "https://example.com/testnews"
    tests:
      - !include tests/status_code_is_200.yaml
  - name: get_news
    vars:
      news_id: ${{ response.json()["news_list"][0]["id"] }}
    tests:
      - !include tests/status_code_is_200.yaml
  - name: like_news
    path: ${news_id}/like
    method: POST
    body:
      total_likes: 1
    tests:
      - !include tests/status_code_is_200.yaml
  - name: dislike_news
    path: ${news_id}/like
    method: DELETE
    body:
      total_likes: 1
    tests:
      - !include tests/status_code_is_200.yaml
